{
    "version": "1.14.2",
    "description": "The minimal, blazing fast, and extremely customizable prompt for any shell!",
    "homepage": "https://starship.rs",
    "license": "ISC",
    "notes": [
        "Usage: Add 'Invoke-Expression (&starship init powershell)' to the end of your PowerShell $PROFILE.",
        "Prerequisites: A Powerline font installed and enabled in your terminal."
    ],
    "suggest": {
        "vcredist": "extras/vcredist2022"
    },
    "depends": ["cvp/nushell", "cvp/clink"],
    "architecture": {
        "64bit": {
            "url": "https://github.com/starship/starship/releases/download/v1.14.2/starship-x86_64-pc-windows-msvc.zip",
            "hash": "1e4d454c7ee7ee60daa490801ca8352e7c1947cc4d3f548101bfe48f4bb1e95b"
        },
        "32bit": {
            "url": "https://github.com/starship/starship/releases/download/v1.14.2/starship-i686-pc-windows-msvc.zip",
            "hash": "01af958ca5dac29484f4e02bb85d76911328e5375537867e5555d28f17d9646c"
        },
        "arm64": {
            "url": "https://github.com/starship/starship/releases/download/v1.14.2/starship-aarch64-pc-windows-msvc.zip",
            "hash": "922b7ac3fee850fba8ca9811b0ce13e989d946bd6dbd2595e0beabf9dfe5d055"
        }
    },
    "pre_install": [
        "",
        "'.cache', 'profile' | ForEach-Object { ensure \"$dir\\$_\" | Out-Null }",
        "",
        "$cachedir = \"$env:USERPROFILE/.cache\"",
        "ensure $cachedir | Out-Null",
        "$cachedir = \"$env:USERPROFILE/.cache/$appName\"",
        "",
        "Write-UserMessage -Message \"Linking $(friendly_path $cachedir) => $(friendly_path $dir/.cache)\" -Output:$false",
        "",
        "if (Test-Path -LiteralPath $cachedir -PathType 'Container') {",
        "    Remove-DirectoryJunctionLink -LinkName $cachedir",
        "}",
        "New-DirectoryJunctionLink -Target $dir/.cache -LinkName $cachedir | Out-Null",
        "",
        "",
        "Write-Host \":: Create profile for clink/starship.lua...\" -ForegroundColor DarkCyan",
        "$ofile = \"$dir/profile/starship.lua\"",
        "$cont = \"load(io.popen('starship init cmd'):read(\"\"*a\"\"))()\"",
        "Set-Content \"$ofile\" \"$cont\" -Encoding ASCII",
        "",
        "Write-Host \":: Create script for start starship by clink...\" -ForegroundColor DarkCyan",
        "#ensure $dir/profile | Out-Null",
        "$ofile = \"$dir/starship_by_clink.cmd\"",
        "$cont = \"@cmd.exe /s /k clink inject --profile $dir/profile\"",
        "Set-Content \"$ofile\" \"$cont\" -Encoding ASCII",
        "",
        "Write-Host \":: Allow called by 'starship_by_clink'\" -ForegroundColor DarkCyan",
        "",
        "Write-Host \":: Create script for start starship by nushell...\" -ForegroundColor DarkCyan",
        "#ensure $dir/profile | Out-Null",
        "$ofile = \"$dir/starship_by_nushell.cmd\"",
        "$cont = \"@cmd.exe /s /k nu --config $dir/profile/config.nu\"",
        "Set-Content \"$ofile\" \"$cont\" -Encoding ASCII",
        "",
        "Write-Host \":: Allow called by 'starship_by_nushell'\" -ForegroundColor DarkCyan",
        "",
        ""
    ],
    "post_install": [
        "",
        "$null, $bucket = find_manifest(\"nushell\")",
        "$bucketdir = Find-BucketDirectory($bucket)",
        "",
        "Write-Host \":: Config for start starship by nushell...\" -ForegroundColor DarkCyan",
        "cmd.exe /c \"starship init nu > $dir/.cache/init.nu\"",
        "#$nu.config-path",
        "$ifile = \"$(appdir nushell $global)/current/AppData/config.nu\"",
        "$ofile = \"$dir/profile/config.nu\"",
        "$cont_append = \"source $dir/.cache/init.nu\"",
        "$cont = (Get-Content \"$ifile\")",
        "$found = False",
        "foreach($current_line in $cont)",
        "{",
        "    $det = $current_line.Contains($cont_append)",
        "    if($det)",
        "    {",
        "        $found = $det",
        "        break",
        "    }",
        "}",
        "if ($found) {",
        "    Write-Host \":: Nushell config.nu has been patched before...\" -ForegroundColor DarkCyan",
        "} else {",
        "    #Write-Output \"$cont_append\" | Out-File -Append -encoding \"ASCII\" \"$ofile\"",
        "    $cont += \"\"",
        "    $cont += $cont_append",
        "    $cont += \"\"",
        "    Set-Content \"$ofile\" ($cont -join \"`r`n\") -Encoding ASCII",
        "    Write-Host \":: Nushell config.nu patched done...\" -ForegroundColor DarkCyan",
        "}",
        "",
        "Write-Host \":: Allow called by 'starship_by_clink'\" -ForegroundColor DarkCyan",
        ""
    ],
    "bin": [
        "starship.exe",
        "starship_by_clink.cmd",
        "starship_by_nushell.cmd"
    ],
    "persist": "profile",
    "checkver": {
        "github": "https://github.com/starship/starship"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/starship/starship/releases/download/v$version/starship-x86_64-pc-windows-msvc.zip"
            },
            "32bit": {
                "url": "https://github.com/starship/starship/releases/download/v$version/starship-i686-pc-windows-msvc.zip"
            },
            "arm64": {
                "url": "https://github.com/starship/starship/releases/download/v$version/starship-aarch64-pc-windows-msvc.zip"
            }
        },
        "hash": {
            "url": "$url.sha256"
        }
    }
}
